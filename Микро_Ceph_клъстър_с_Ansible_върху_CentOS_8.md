# Микро Ceph клъстър с Ansible върху CentOS 8

## Ceph
Ceph е софтуерно дефинирано решение за съхранение на данни (storage), предназначено да отговори на нуждите на обекта, блока и файловете за съхранение на центрове за данни, приемащи отворен код като новата норма за блоково съхранение с висок растеж, съхраняване на обекти и лакове за данни. Ceph осигурява мащабируемо съхранение на предприятието, като поддържа разходите на CAPEX и OPEX в съответствие с основните основни цени на дисковите стоки.

## Ansible
Ansible е инструмент или платформа с отворен код за автоматизация, използван за IT задачи като управление на конфигурацията, внедряване на приложения, вътрешно обслужване и предоставяне. Автоматизацията е от решаващо значение в наши дни, в IT среди, които са твърде сложни и често трябва да се мащабират твърде бързо. Автоматизацията опростява сложните задачи, не само прави работата на разработчиците по-управляема, но им позволява да съсредоточат вниманието си върху други задачи, които добавят стойност за една организация. С други думи, той освобождава времето и повишава ефективността.

## Компоненти на Ceph
Основните компоненти на Ceph Storage Cluster са:
- Монитори: Монитор на Ceph (`ceph-mon`) поддържа карти на състоянието на клъстера, включително картата на монитора, картата на мениджъра, OSD картата и картата CRUSH
- Ceph OSD: Ceph OSD (демон за съхранение на обекти, `ceph-osd`) съхранява данни, обработва репликация на данни, възстановяване, балансиране и предоставя известна информация за мониторинг на Ceph монитори и мениджъри, като проверява други Ceph OSD демони за сърдечен ритъм. Най-малко 3 Ceph OSD са необходими за redundancy и high availability.
- MDS: Ceph метаданни сървър (MDS, `ceph-mds`) съхранява метаданни от името на Ceph Filesystem (т.е., Ceph Block Devices и Ceph Object Storage не използват MDS). Ceph метаданните позволяват на потребителите на файлова система POSIX да изпълняват основни команди (като, ls, find и т.н.), без да поставят огромна тежест върху Ceph Storage Stolus.
- Мениджъри на Ceph: Демонът на Ceph Manager (`ceph-mgr`) е отговорен за следенето на метриките на изпълнение и текущото състояние на клъстера Ceph, включително използването на съхранение, текущите показатели на ефективността и натоварването на системата.

Нашата инсталация на Ceph клъстър върху CentOS 8 се основава на следния дизайн на системата.
```
-----------------------------------------------------------------------------------------------
| Hostname FQDN           | Ceph component | Management    | Cluster Network | Public Network |
-----------------------------------------------------------------------------------------------
| ansible.example.com     | ceph-ansible   |               |                 |                |
| node-1.ceph.example.com | mon, osd       | 192.168.10.11 | 10.44.0.11      | 192.168.20.11  |
| node-2.ceph.example.com | mon, osd, mgr  | 192.168.10.12 | 10.44.0.12      | 192.168.20.12  |
| node-3.ceph.example.com | mon, osd       | 192.168.10.13 | 10.44.0.13      | 192.168.20.13  |
-----------------------------------------------------------------------------------------------
 ```
 ![assets/micro-ceph-cluster-1.png](/assets/micro-ceph-cluster-1.png)
